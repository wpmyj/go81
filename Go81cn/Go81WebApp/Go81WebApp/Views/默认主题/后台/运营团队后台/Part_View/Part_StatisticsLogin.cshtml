@using Go81WebApp.Models.数据模型.统计数据模型

<div class="title-base-out">
    <div class="title-base-middle">
        <div class="title-base-inner">登录统计</div>
    </div>
</div>
<div class="gys_znxx_box">
    <div class="gys_znxx_contentbox">
        <div style="width: 800px; height: auto; padding: 20px; margin: 0 auto; padding-bottom:0;">
            <div style="width: 750px; height: 35px; ">
                <div style="float: left; width: 100px; text-align: left; line-height: 30px; text-align: right; color: #666;">筛选条件：</div>
                <div style="float: left;">
                    <select id="loginuser" name="loginuser" style="width:150px; height:30px;" onchange="getloginstatistic();">
                        <option value="" selected="selected">不限用户</option>
                        <option value="供应商">供应商</option>
                        <option value="单位用户">单位用户</option>
                        <option value="专家">专家</option>
                        <option value="运营团队">运营团队</option>
                    </select>
                </div>

                @*<div style="float: left; text-align: left; line-height: 30px; text-align: right; color: #666;">行业：</div>*@
                <div style="float: left;">
                    <select id="loginresult" name="loginresult" style="width:150px; height:30px; margin: 0 5px 0 5px;" onchange="getloginstatistic();">
                        <option value="">不限登录结果</option>
                        <option value="登录成功">登录成功</option>
                        <option value="登录失败">登录失败</option>
                    </select>

                </div>
                <div style="float: left;">
                    <select id="nettype" name="nettype" style="width:150px; height:30px; margin-right:5px;" onchange="getloginstatistic();">
                        <option value="" selected="selected">不限网络</option>
                        <option value="外网">外网</option>
                        <option value="内网">内网</option>
                    </select>
                </div>
                <div style="float: left;">
                    <select id="time" name="time" style="width:150px; height:30px;" onchange="getloginstatistic();">
                        <option value="">不限时间</option>
                        <option value="1" selected="selected">今天</option>
                        <option value="7">近一周</option>
                        <option value="30">近一月</option>
                        <option value="90">近三月</option>
                        <option value="180">近半年</option>
                        <option value="365">近一年</option>
                    </select>
                </div>
            </div>
            <hr />
        </div>
        <div class="gys_znxx_content" id="textcontent">
            共@(ViewData["统计总数"].ToString())条数据
            <table width="100%" cellpadding="0" cellspacing="0">
                <tr>
                    <th width="25%">登录IP地址</th>
                    <th width="15%">登录结果</th>
                    <th width="20%">用户ID</th>
                    <th width="25%">登录时间</th>
                    <th width="15%">访问网络</th>
                </tr>
                @foreach (var item in (IEnumerable<登录统计>)ViewData["登录统计"])
                {
                    <tr>
                        <td>@item.登录IP</td>
                        <td>@item.登录结果</td>
                        <td>@item.用户数据.用户ID</td>
                        <td>@item.登录时间.ToString()</td>
                        @if (item.内网访问)
                        {
                            <td>内网</td>
                        }
                        else
                        {
                            <td>外网</td>
                        }
                    </tr>
                }
            </table>
            <div class="gys_znxx_content_detailbox">

            </div>
        </div>
    </div>
</div>
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $(".gys_znxx_content_detailbox a").each(function () {
            if ($(this).text() == num) {
                $(this).addClass("currentPage");
            }
            if (num == j) {
                $(".gys_znxx_content_detailbox a:last").addClass("endPage");
            }
            if (num == 1) {
                $(".gys_znxx_content_detailbox a:first").addClass("endPage");
            }
        });

        $("#登录统计").addClass("left_menu_select").children("a").css({ "color": "#fff" });
        $("#登录统计").parents().attr("show", "true").show().prev("li").addClass("open").children("span").css({ "background": "url('../Images/tree_icons.png') -115px -4px" });
    });
    function getloginstatistic() {
        var loginuser = $("#loginuser").val();
        var loginresult = $("#loginresult").val();
        var time = $("#time").val();
        var nettype = $("#nettype").val();
        var parm = "loginuser=" + loginuser + "&loginresult=" + loginresult + "&time=" + time + "&nettype=" + nettype;
        $.ajax({
            cache: false,
            async: false,
            url: "/运营团队后台/Part_StatisticsLoginSearch",
            data: parm,
            success: function (data) {
                $("#textcontent").html(data);
            }
        });
    }
</script>
