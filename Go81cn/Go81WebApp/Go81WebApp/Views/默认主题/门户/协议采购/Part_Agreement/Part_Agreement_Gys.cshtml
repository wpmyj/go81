@using Go81WebApp.Models.数据模型
@using Go81WebApp.Models.数据模型.商品数据模型
@using Go81WebApp.Models.数据模型.用户数据模型
@using Go81WebApp.Models.数据模型.推广业务数据模型
@using Go81WebApp.Models.管理器.推广业务管理
@using Go81WebApp.Models.管理器
@using MongoDB.Driver.Builders
<link href="~/css/css.css" rel="stylesheet" />
<script src="~/JS/provinceandcity_all.js"></script>
<script src="~/JS/marquee.js" type="text/javascript"></script>
<script src="~/JS/clickStatistics.js" type="text/javascript"></script>
<style type="text/css">
    .arealist a {
        width: 80px;
        text-align: center;
    }

        .arealist a:hover {
            background-color: #fff;
        }

    .choose {
        color: red;
    }
    #gt{
        list-style:none;
        list-style-type:none;
        padding:0px;
        margin:0px auto;
    }
    #gt li{
        float:left;
        padding:10px;
        text-decoration:underline;
        color:#ff0000;
    }
    #lefttype{
        width:13%;
        height:auto;
        float:left;
        padding-top:10px;
        text-align:right;
    }
    #righttype{
        width:87%;
        height:auto;
        float:left;
    }
</style>

<div class="gys_xttz_box">
    <div class="gys_xttz_topbox">
        <div style="width: 948px;">
            <div class="title-base-out" style="margin-top:0;">
                <div class="title-base-middle">
                    <div class="title-base-inner">供应商列表</div>
                </div>
            </div>
        </div>
    </div>
    <div style="border:1px solid #999;width:945px;">
        @{
            IEnumerable<商品分类> goodtype = ViewData["goodtype"] as IEnumerable<商品分类>;
        }
        <div style="border-bottom:1px solid #808080;">
            <div id="lefttype">办公物资分类：</div>
            <div id="righttype">
                <ul id="gt">
                    @foreach (var item in goodtype)
                    {
                        <li>@item.分类名</li>
                    }
                    <li><a href="/协议采购/Agreement_Gys?id=1" target="_blank" style="color:#0094ff;">点击查看更多>></a></li>
                </ul>
                <div style="clear:both;"></div>
            </div>
            <div style="clear:both;"></div>
        </div>
        <div>
            <div class="provence">
                <table id="provence" cellpadding="0" cellspacing="0" style="margin-top:10px; margin-right:auto; margin-left:auto;">
                    <tr>
                        <td style="padding:10px 5px;text-indent:8px;">
                            所属地区：
                            <span class="p_area" id="#sichuan">
                                <span class="tig" style="display: inline-block;"></span>
                                <a class="province" style="color:red; display:inline-block;width: 160px;">四川省</a>
                            </span>
                            <span class="p_area" id="#yunnan">
                                <span class="tig"></span>
                                <a class="province" style=" display: inline-block;width: 160px;">云南省</a>
                            </span>
                            <span class="p_area" id="#xizang">
                                <span class="tig"></span>
                                <a class="province" style=" display: inline-block;width: 160px;">西藏自治区</a>
                            </span>
                            <span class="p_area" id="#guizhou">
                                <span class="tig"></span>
                                <a class="province" style=" display: inline-block;width: 160px;">贵州省</a>
                            </span>
                            <span class="p_area" id="#chongqing">
                                <span class="tig"></span>
                                <a class="province" style=" display: inline-block;width: 160px;">重庆市</a>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5" style="padding:10px 5px;text-indent:10px;">
                            <table class="pro_city" id="sichuan" style="display: block; border:1px solid #aaa;">
                                <tr>
                                    <td style="text-align:left;">
                                        <span><a class="cityOrearea1">成都市</a></span>
                                        <span><a class="cityOrearea1">自贡市</a></span>
                                        <span><a class="cityOrearea1">攀枝花市</a></span>
                                        <span><a class="cityOrearea1">泸州市</a></span>
                                        <span><a class="cityOrearea1">德阳市</a></span>
                                        <span><a class="cityOrearea1">绵阳市</a></span>
                                        <span><a class="cityOrearea1">广元市</a></span>
                                        <span><a class="cityOrearea1">遂宁市</a></span>
                                        <span><a class="cityOrearea1">内江市</a></span>
                                        <span><a class="cityOrearea1">乐山市</a></span>
                                        <span><a class="cityOrearea1">南充市</a></span>
                                        <span><a class="cityOrearea1">眉山市</a></span>
                                        <span><a class="cityOrearea1">宜宾市</a></span>
                                        <span><a class="cityOrearea1">广安市</a></span>
                                        <span><a class="cityOrearea1">达州市</a></span>
                                        <span><a class="cityOrearea1">雅安市</a></span>
                                        <span><a class="cityOrearea1">巴中市</a></span>
                                        <span><a class="cityOrearea1">资阳市</a></span>
                                        <span><a class="cityOrearea1">阿坝藏族羌族自治州</a></span>
                                        <span><a class="cityOrearea1">甘孜藏族自治州</a></span>
                                        <span><a class="cityOrearea1">凉山彝族自治州</a></span>
                                    </td>
                                </tr>
                            </table>
                            <table class="pro_city" id="yunnan" style="border:1px solid #aaa;">
                                <tr class="">
                                    <td style="text-align:left;">
                                        <span><a class="cityOrearea2">昆明市</a></span>
                                        <span><a class="cityOrearea2">曲靖市</a></span>
                                        <span><a class="cityOrearea2">玉溪市</a></span>
                                        <span><a class="cityOrearea2">保山市</a></span>
                                        <span><a class="cityOrearea2">昭通市</a></span>
                                        <span><a class="cityOrearea2">楚雄彝族自治州</a></span>
                                        <span><a class="cityOrearea2">红河哈尼族彝族自治州</a></span>
                                        <span><a class="cityOrearea2">文山壮族苗族自治州</a></span>
                                        <span><a class="cityOrearea2">思茅地区</a></span>
                                        <span><a class="cityOrearea2">西双版纳傣族自治州</a></span>
                                        <span><a class="cityOrearea2">大理白族自治州</a></span>
                                        <span><a class="cityOrearea2">德宏傣族景颇族自治州</a></span>
                                        <span><a class="cityOrearea2">丽江地区</a></span>
                                        <span><a class="cityOrearea2">怒江傈僳族自治州</a></span>
                                        <span><a class="cityOrearea2">迪庆藏族自治州</a></span>
                                        <span><a class="cityOrearea2">临沧地区</a></span>
                                    </td>
                                </tr>
                            </table>
                            <table class="pro_city" id="xizang" style="border:1px solid #aaa;">
                                <tr>
                                    <td style="text-align:left;">
                                        <span><a class="cityOrearea3">拉萨市</a></span>
                                        <span><a class="cityOrearea3">昌都地区</a></span>
                                        <span><a class="cityOrearea3">山南地区</a></span>
                                        <span><a class="cityOrearea3">日喀则地区</a></span>
                                        <span><a class="cityOrearea3">那曲地区</a></span>
                                        <span><a class="cityOrearea3">阿里地区</a></span>
                                        <span><a class="cityOrearea3">林芝地区</a></span>
                                    </td>
                                </tr>
                            </table>
                            <table class="pro_city" id="guizhou" style="border:1px solid #aaa;">
                                <tr>
                                    <td style="text-align:left;">
                                        <span><a class="cityOrearea4">贵阳市</a></span>
                                        <span><a class="cityOrearea4">六盘水市</a></span>
                                        <span><a class="cityOrearea4">遵义市</a></span>
                                        <span><a class="cityOrearea4">安顺市</a></span>
                                        <span><a class="cityOrearea4">铜仁地区</a></span>
                                        <span><a class="cityOrearea4">黔西南布依族苗族自治州</a></span>
                                        <span><a class="cityOrearea4">毕节地区</a></span>
                                        <span><a class="cityOrearea4">黔东南苗族侗族自治州</a></span>
                                        <span><a class="cityOrearea4">黔南布依族苗族自治州</a></span>
                                    </td>
                                </tr>
                            </table>
                            <table class="pro_city" id="chongqing" style="border:1px solid #aaa;">
                                <tr>
                                    <td style="text-align:left;">
                                        <span><a class="cityOrearea5">市辖区</a></span>
                                        <span><a class="cityOrearea5">沙坪坝区</a></span>
                                        <span><a class="cityOrearea5">九龙坡区</a></span>
                                        <span><a class="cityOrearea5">长寿县</a></span>
                                        <span><a class="cityOrearea5">大渡口区</a></span>
                                        <span><a class="cityOrearea5">大足县</a></span>
                                        <span><a class="cityOrearea5">合川市</a></span>
                                        <span><a class="cityOrearea5">江北区</a></span>
                                        <span><a class="cityOrearea5">江北县</a></span>
                                        <span><a class="cityOrearea5">江津市</a></span>
                                        <span><a class="cityOrearea5">璧山县</a></span>
                                        <span><a class="cityOrearea5">南岸区</a></span>
                                        <span><a class="cityOrearea5">南桐矿区</a></span>
                                        <span><a class="cityOrearea5">綦江县</a></span>
                                        <span><a class="cityOrearea5">荣昌县</a></span>
                                        <span><a class="cityOrearea5">北碚区</a></span>
                                        <span><a class="cityOrearea5">巴县市</a></span>
                                        <span><a class="cityOrearea5">市中区</a></span>
                                        <span><a class="cityOrearea5">双桥区</a></span>
                                        <span><a class="cityOrearea5">铜梁县</a></span>
                                        <span><a class="cityOrearea5">潼南县</a></span>
                                        <span><a class="cityOrearea5">永川市</a></span>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
                <div class="gys_ztbsearch_contentbox">
                    <input type="hidden" id="province" name="province" value="四川省" />
                    <input id="city" name="city" type="hidden" value="成都市" />
                    <input id="chooseareapage" name="chooseareapage" type="hidden" value="1" />
                    <div id="waitfor" style="position:absolute; z-index:100; width:800px; height:300px; text-align:center; line-height:300px; display:none;">
                        <img src="~/Images/ajax-loader.gif" />
                    </div>
                    <div style="padding-left:20px;">公司名称：<input type="text" id="gys_name" class="gys_ztbsearch_search_text" /><input type="button" onclick="search_gys()" class="gys_ztbsearch_search_botton" value="搜索" />
                    </div>
                    <div id="userlist">

                        @{
                            IEnumerable<用户基本数据> gsylist = ViewData["供应商列表"] as IEnumerable<用户基本数据>;
                            if (gsylist != null && gsylist.Any())
                            {
                                foreach (var k in gsylist)
                                {

                                    if (k != null)
                                    {
                                        供应商 gys = k as 供应商;

                                        var d = (int)gys.供应商用户信息.认证级别;
                                        //if ((int)gys.供应商用户信息.认证级别 >= 4)
                                        //{
                                        <div class="pay_gys_info">
                                            <div class="lefts" style="width:445px; padding-left:17px;">
                                                <a class="gys_title" href="/供应商陈列/Supplier_Destination?id=@gys.Id" target="_blank">@gys.企业基本信息.企业名称</a>
                                                <div class="icon_bar">
                                                    @if ((int)gys.供应商用户信息.认证级别 >= 4)
                                                    { <a class="rzgys_y" href="###" title="@gys.供应商用户信息.认证级别"></a>}
                                                    @*else
                                                        {
                                                            <a class="rzgys_n" href="###" title="@gys.供应商用户信息.认证级别"></a>
                                                        }*@

                                                    @if (gys.供应商用户信息.年检列表.ContainsKey(DateTime.Now.Year.ToString()))
                                                    { <a class="njgys_y" href="###" title="已年检"></a>}
                                                    @*else
                                                        {
                                                            <a class="njgys_n" href="###" title="未年检"></a>
                                                        }*@

                                                    @if (gys.供应商用户信息.应急供应商)
                                                    { <a class="yjgys_y" href="###" title="应急供应商"></a>}
                                                    @*else
                                                        {
                                                            <a class="yjgys_n" href="###" title="非应急供应商"></a>
                                                        }*@

                                                    @if (gys.供应商用户信息.协议供应商)
                                                    { <a class="xygys_y" href="###" title="协议供应商"></a>}
                                                    @*else
                                                        {
                                                            <a class="xygys_n" href="###" title="非协议供应商"></a>
                                                        }*@

                                                    @if ((int)gys.供应商用户信息.入库级别 >= 2)
                                                    { <a class="rkgys_y" href="###" title="@gys.供应商用户信息.入库级别"></a>}
                                                    @*else
                                                        {
                                                            <a class="rkgys_n" href="###" title="@gys.供应商用户信息.入库级别"></a>
                                                        }*@
                                                </div>
                                                <table width="auto">

                                                    <tr>
                                                        <td class="notes swidth">所属行业:</td>
                                                        <td class="notes_con mwidth" title="@gys.企业基本信息.所属行业">
                                                            @if (gys.企业基本信息 != null && !string.IsNullOrEmpty(gys.企业基本信息.所属行业))
                                                            {
                                                                <span class="gyslist_zhuying">@gys.企业基本信息.所属行业</span>
                                                            }
                                                            else
                                                            {
                                                                <span>未填写</span>
                                                            }
                                                        </td>
                                                        <td class="notes lwidth">联系方式:</td>
                                                        <td class="notes_con">@gys.企业联系人信息.联系人固定电话</td>

                                                    </tr>

                                                    <tr>
                                                        <td class="notes swidth">主营产品:</td>
                                                        @{
                                                            var m = "";
                                                            foreach (var h in gys.可提供产品类别列表)
                                                            {
                                                                foreach (var h_s in h.二级分类)
                                                                {
                                                                    m += h_s + ";";
                                                                }
                                                            }
                                                        }
                                                        <td class="notes_con mwidth" title="@m">
                                                            <span class="gyslist_zhuying">@m</span>
                                                        </td>
                                                        @if (d >= 4)
                                                        {
                                                            <td class="notes lwidth">认证级别:</td>
                                                            <td class="notes_con">@gys.供应商用户信息.认证级别</td>
                                                        }
                                                        else
                                                        {
                                                            <td class="notes lwidth">&nbsp;</td>
                                                            <td class="notes_con">&nbsp;</td>
                                                        }
                                                    </tr>
                                                    <tr>
                                                        <td class="notes swidth">所在地域:</td>
                                                        <td class="notes_con mwidth">
                                                            @if (gys.所属地域.地域.Length > 14)
                                                            {
                                                                <span>@gys.所属地域.地域.Substring(0, 14) ...</span>
                                                            }
                                                            else
                                                            {
                                                                <span>@gys.所属地域.地域</span>
                                                            }
                                                        </td>
                                                        <td class="notes lwidth">历史参标次数:</td>
                                                        <td class="notes_con"> @gys.历史参标记录.Count() 次 </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="notes swidth">员工人数:</td>
                                                        <td class="notes_con mwidth">@gys.企业基本信息.员工人数</td>
                                                        <td class="notes lwidth">登记商品数:</td>
                                                        <td class="notes_con">@商品管理.查询供应商商品(gys.Id, 0, 0).Count() 个</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="notes" colspan="2">
                                                            <a href="">资质证书></a>
                                                            <a href="">厂房设备图></a>
                                                            <a href="/供应商陈列/Supplier_Destination?id=@gys.Id" target="_blank">更多企业信息></a>
                                                        </td>

                                                        <td class="notes">经营类型:</td>
                                                        <td class="notes_con">@gys.企业基本信息.经营类型 / @gys.企业基本信息.经营子类型</td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="rights">
                                                @{
                                                            var 已开通服务列表 = 供应商服务记录管理.查询供应商服务记录(0, 0, Query<供应商服务记录>.Where(o => o.所属供应商.用户ID == gys.Id));
                                                            if (已开通服务列表.Count() > 0 && 已开通服务列表.First().已开通的服务.Exists(o => o.所申请项目名 == "标准会员" || o.所申请项目名 == "商务会员" || o.所申请项目名 == "企业推广服务B1-1位置" || o.所申请项目名 == "企业推广服务B1-2位置"))
                                                            {
                                                                if (gys.供应商用户信息.展示商品.Count > 0)
                                                                {
                                                                    if (已开通服务列表.First().已开通的服务.Exists(o => (o.所申请项目名 == "商务会员" || o.所申请项目名 == "企业推广服务B1-2位置") && o.结束时间 > DateTime.Now))
                                                                    {
                                                                        <div class="rights_more"><a href="/供应商陈列/Supplier_Destination?id=@gys.Id" target="_blank">查看更多商品>></a></div>
                                                                        <div class="wrap">
                                                                            <div class="ul">
                                                                                @foreach (var g in gys.供应商用户信息.展示商品)
                                                                                {
                                                                                    <div class="gd li">
                                                                                        <a href="/商品陈列/Product_Detail?id=@g.商品ID" target="_blank" onclick='clickStatistics("B1-2","1", "@g.商品ID","@g.商品.商品信息.所属供应商.用户ID")'><img src="@(g.商品.商品信息.商品图片.Count > 0 ? g.商品.商品信息.商品图片[0].Replace("original", "150X150") : "") " /></a>
                                                                                        <a href="/商品陈列/Product_Detail?id=@g.商品ID" target="_blank" class="rights_productname" onclick='clickStatistics("B1-2","1", "@g.商品ID","@g.商品.商品信息.所属供应商.用户ID")'>@g.商品.商品信息.商品名</a>
                                                                                        <p class="price">￥@g.商品.销售信息.价格</p>
                                                                                        @*<p class="lg">销量：@kk.销售信息.销量</p>*@
                                                                                    </div>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    else if (已开通服务列表.First().已开通的服务.Exists(o => (o.所申请项目名 == "标准会员" || o.所申请项目名 == "企业推广服务B1-1位置") && o.结束时间 > DateTime.Now))
                                                                    {
                                                                        <div class="rights_more"><a href="/供应商陈列/Supplier_Destination?id=@gys.Id" target="_blank">查看更多商品>></a></div>
                                                                        foreach (var g in gys.供应商用户信息.展示商品)
                                                                        {
                                                                            <div class="gd">
                                                                                <a href="/商品陈列/Product_Detail?id=@g.商品ID" target="_blank" onclick='clickStatistics("B1-1","1", "@g.商品ID","@g.商品.商品信息.所属供应商.用户ID")'><img src="@(g.商品.商品信息.商品图片.Count > 0 ? g.商品.商品信息.商品图片[0].Replace("original", "150X150") : "") " /></a>
                                                                                <a href="/商品陈列/Product_Detail?id=@g.商品ID" target="_blank" class="rights_productname" onclick='clickStatistics("B1-1","1", "@g.商品ID","@g.商品.商品信息.所属供应商.用户ID")'>@g.商品.商品信息.商品名</a>
                                                                                <p class="price">￥@g.商品.销售信息.价格</p>
                                                                                @*<p class="lg">销量：@kk.销售信息.销量</p>*@
                                                                            </div>
                                                                        }
                                                                    }

                                                                }
                                                                else
                                                                {
                                                                    var gys_good = 商品管理.查询供应商商品(gys.Id, 0, 6, Query<商品>.EQ(o => o.审核数据.审核状态, 审核状态.审核通过), includeDisabled: false);
                                                                    if (gys_good != null && gys_good.Any())
                                                                    {
                                                                        if (已开通服务列表.First().已开通的服务.Exists(o => (o.所申请项目名 == "商务会员" || o.所申请项目名 == "企业推广服务B1-2位置") && o.结束时间 > DateTime.Now))
                                                                        {
                                                                            <div class="rights_more"><a href="/供应商陈列/Supplier_Destination?id=@gys.Id" target="_blank">查看更多商品>></a></div>
                                                                            <div class="wrap">
                                                                                <div class="ul">
                                                                                    @foreach (var kk in gys_good)
                                                                                    {
                                                                                        <div class="gd li">
                                                                                            <a href="/商品陈列/Product_Detail?id=@kk.Id" target="_blank" onclick='clickStatistics("B1-2","1", "@kk.Id","@kk.商品信息.所属供应商.用户ID")'><img src="@(kk.商品信息.商品图片.Count > 0 ? kk.商品信息.商品图片[0].Replace("original", "150X150") : "") " /></a>
                                                                                            <a href="/商品陈列/Product_Detail?id=@kk.Id" target="_blank" class="rights_productname" onclick='clickStatistics("B1-2","1", "@kk.Id","@kk.商品信息.所属供应商.用户ID")'>@kk.商品信息.商品名</a>
                                                                                            <p class="price">￥@kk.销售信息.价格</p>
                                                                                            @*<p class="lg">销量：@kk.销售信息.销量</p>*@
                                                                                        </div>
                                                                                    }
                                                                                </div>
                                                                            </div>
                                                                        }
                                                                        else if (已开通服务列表.First().已开通的服务.Exists(o => (o.所申请项目名 == "标准会员" || o.所申请项目名 == "企业推广服务B1-1位置") && o.结束时间 > DateTime.Now))
                                                                        {
                                                                            gys_good = gys_good.Take(3);
                                                                            <div class="rights_more"><a href="/供应商陈列/Supplier_Destination?id=@gys.Id" target="_blank">查看更多商品>></a></div>
                                                                            foreach (var g in gys_good)
                                                                            {
                                                                                <div class="gd">
                                                                                    <a href="/商品陈列/Product_Detail?id=@g.Id" target="_blank" onclick='clickStatistics("B1-1","1", "@g.Id","@g.商品信息.所属供应商.用户ID")'><img src="@(g.商品信息.商品图片.Count > 0 ? g.商品信息.商品图片[0].Replace("original", "150X150") : "") " /></a>
                                                                                    <a href="/商品陈列/Product_Detail?id=@g.Id" target="_blank" class="rights_productname" onclick='clickStatistics("B1-1","1", "@g.Id","@g.商品信息.所属供应商.用户ID")'>@g.商品信息.商品名</a>
                                                                                    <p class="price">￥@g.销售信息.价格</p>
                                                                                    @*<p class="lg">销量：@kk.销售信息.销量</p>*@
                                                                                </div>
                                                                            }
                                                                        }

                                                                    }
                                                                }
                                                            }
                                                }
                                            </div>
                                        </div>

                                    }

                                }

                                if (ViewData["currentpage"] != null)
                                {
                                    <div class="gys_znxx_content_detailbox">
                                        @if (int.Parse(ViewData["currentpage"].ToString()) != 1)
                                        {
                                            <a id="1" class="page">首页</a><a class="page" style="border-left:none;" id="@(int.Parse(ViewData["currentpage"].ToString())-1)">上一页</a>
                                        }
                                        @for (int i = 0; i <= 10; i++)
                                        {                       //一共最多显示10个页码，前面5个，后面5个
                                            if ((int.Parse(ViewData["currentpage"].ToString()) + i - 5) >= 1 && (int.Parse(ViewData["currentpage"].ToString()) + i - 5) <= int.Parse(ViewData["pagecount"].ToString()))
                                            {
                                                if (5 == i)
                                                {                               //当前页处理
                                                    <a style="border:1px solid #ff0000;">@int.Parse(ViewData["currentpage"].ToString())</a>
                                                }
                                                else
                                                {                               //一般页处理
                                                    <a class="page" id="@(int.Parse(ViewData["currentpage"].ToString()) + i - 5)">@(int.Parse(ViewData["currentpage"].ToString()) + i - 5)</a>

                                                }
                                            }
                                        }
                                        @if (int.Parse(ViewData["currentpage"].ToString()) != int.Parse(ViewData["pagecount"].ToString()))
                                        {
                                            <a class="page" style="border-right:none;" id="@(int.Parse(ViewData["currentpage"].ToString())+1)">下一页</a><a id="@int.Parse(ViewData["pagecount"].ToString())" class="page">末页</a>
                                        }
                                        <span style="font-size:12px;">第@(ViewData["currentpage"])页/共@(ViewData["pagecount"])页</span>
                                    </div>
                                }

                            }
                            else
                            {
                                <div>暂无相关数据！</div>
                            }
                        }
                    </div>
                </div>
            </div>
            <script type="text/javascript">
                $("a.page").on("click", function () {
                    $("#waitfor").show();  //loading
                    $("#chooseareapage").val($(this).attr("id"));
                    var c = $("#city").val();
                    var p = $("#chooseareapage").val();
                    var pp = $("#province").val();
                    $.ajax({
                        type: "POST",
                        url: "/协议采购/Part_AgreementgysCondition",
                        data: { c: c, page: p, pro: pp },
                        success: function (data) {
                            $("#userlist").html(data);
                            $("#waitfor").hide();
                        }
                    });
                });

                $("#provence span").click(function () {
                    if ($(this).attr("id") != "undefined" && $(this).attr("id") != null) {
                        var des = $(this).attr("id").substring(1);
                        $(this).children(".tig").show();
                        $(this).siblings().children(".tig").hide();
                        $("#" + des).show().siblings().hide();
                        //$("#" + des +" tr td a").css({ "color": "black" });
                    }
                });
                function SearchResult() {
                    var c = $("#city").val();
                    var p = $("#chooseareapage").val();
                    var pp = $("#province").val();
                    $.ajax({
                        type: "POST",
                        url: "/协议采购/Part_AgreementgysCondition",
                        data: { page: p, pro: pp, c: c },
                        success: function (data) {
                            $("#userlist").html(data);
                            $("#waitfor").hide();
                        }
                    });
                }
                $(".pro_city a").click(function () {
                    $("#waitfor").show();
                    $(".pro_city a").each(function () {
                        $(this).css({ "color": "black" });
                    });
                    $(this).css({ "color": "red" }).parent().siblings().children().css({ "color": "black" });
                    var s = $(this).siblings();
                    $("#city").val($(this).text());
                    $("#chooseareapage").val("1");
                    SearchResult();
                });
                $("a.province").click(function () {
                    $("#waitfor").show();
                    $(".pro_city a").each(function () {
                        $(this).css({ "color": "black" });
                    });
                    $("a.province").each(function () {
                        $(this).css({ "color": "black" });
                    });
                    $(this).css({ "color": "red" });
                    $("#province").val($(this).text());
                    if ($(this).text() == "四川省") {
                        $("#city").val($("a.cityOrearea1:first").text());
                        $("a.cityOrearea1:first").css({ "color": "red" });
                    }
                    else if ($(this).text() == "云南省") {
                        $("#city").val($("a.cityOrearea2:first").text());
                        $("a.cityOrearea2:first").css({ "color": "red" });
                    }
                    else if ($(this).text() == "西藏自治区") {
                        $("#city").val($("a.cityOrearea3:first").text());
                        $("a.cityOrearea3:first").css({ "color": "red" });
                    }
                    else if ($(this).text() == "贵州省") {
                        $("#city").val($("a.cityOrearea4:first").text());
                        $("a.cityOrearea4:first").css({ "color": "red" });
                    }
                    else if ($(this).text() == "重庆市") {
                        $("#city").val($("a.cityOrearea5:first").text());
                        $("a.cityOrearea5:first").css({ "color": "red" });
                    }
                    $("#chooseareapage").val("1");
                    SearchResult();
                });

                function changecondition(a) {
                    $("#waitfor").show();
                    a.setAttribute("style", "color:red");
                    var l = a.parentNode.getElementsByTagName("a");
                    $("#city").val(a.getAttribute("id"));
                    $("#chooseareapage").val("1");
                    for (var i = 0; i < l.length; i++) {
                        if (a != l[i])
                            l[i].setAttribute("style", "");
                    }
                    var c = $("#city").val();
                    var p = $("#chooseareapage").val();
                    var pp = $("#province").val();
                    $.ajax({
                        type: "POST",
                        url: "/协议采购/Part_AgreementgysCondition",
                        data: { c: c, page: p, pro: pp },
                        success: function (data) {
                            $("#userlist").html(data);
                            $("#waitfor").hide();
                        }
                    });
                }
                function search_gys() {
                    var c = $("#city").val();
                    var p = $("#chooseareapage").val();
                    var pp = $("#province").val();
                    var gys = $("#gys_name").val();
                    $("#waitfor").show();
                    $.ajax({
                        type: "POST",
                        url: "/协议采购/Part_AgreementgysCondition",
                        data: { c: c, page: p, pro: pp, gys: gys },
                        success: function (data) {
                            $("#userlist").html(data);
                            $("#waitfor").hide();
                        }
                    });
                }
                $(document).ready(function () {
                    $('.wrap').marquee({
                        auto: true,
                        interval: 3000,
                        speed: 500,
                        showNum: 3,
                        stepLen: 3
                    });
                    $(".action_link").each(function () {
                        if ($(this).text() == "办公物资") {
                            $(this).parent("div").addClass("on");
                        }
                    });
                    $("a.cityOrearea1:first").css({ "color": "red" });
                    $("table tr td span a").mouseover(function () {
                        $(this).css({ "text-decoration": "underline" });
                    });
                    $("table tr td span a").mouseout(function () {
                        $(this).css({ "text-decoration": "none" });
                    });
                    search_gys();
                });
            </script>
        </div>
    </div>

</div>
